# 📓 오늘의 파이썬 공부 - 얕은 복사 vs 깊은 복사

오늘은 파이썬에서 데이터를 복사할 때 `얕은 복사(shallow copy)`와 `깊은 복사(deep copy)`가 어떻게 다르게 동작하는지 헷갈려서 제대로 정리해보기로 했다.

---

## 🥲 대입은 복사가 아니야?

처음엔 그냥 변수에 대입하면 복사되는 줄 알았다.

```python
a = [1, 2, 3]
b = a
```

근데 `b[0] = 999` 해버리면 `a[0]`도 같이 바뀌는 거다.  
엥? 왜지? 알고 보니 `a`와 `b`는 **같은 객체를 가리키고 있는 거**였다. 이름만 다르지 실은 같은 리스트!

## 🟠 얕은 복사란?

그래서 찾은 게 얕은 복사였다. 얕은 복사를 하면 겉껍질은 새로 만들어지는데, 내부에 들어있는 건 원본이랑 공유하게 된단다.

```python
import copy
a = [1, 2, [3, 4]]
b = copy.copy(a)
b[2][0] = 999

print(a) # [1, 2, [999, 4]]
```


헉… 내부 리스트까지 같이 바뀌는 건 뭐람?
알고 보니 a와 b는 겉 리스트만 다르고, `안에 들어있는 [3, 4]는 여전히 같은 걸 가리키고 있었던 거`다.

## 🔵 깊은 복사란?

그래서 찾아낸 깊은 복사.

```python
import copy
a = [1, 2, [3, 4]]
b = copy.deepcopy(a)
b[2][0] = 999

print(a) # [1, 2, [3, 4]]
print(b) # [1, 2, [999, 4]]
```


이건 내부 리스트까지 `완전히 새로 복사`된다.
드디어 내가 원하는 진짜 "복사"!



## 🧪 다른 복사 방법들 실험해보기

#### 슬라이싱

```python
a = [1, 2, 3]
b = a[:]
```

#### list() 생성자

```python
a = [1, 2, 3]
b = list(a)
```

#### copy 메서드

```python
a = {'x': 1, 'y': 2}
b = a.copy()
```

> 이런 것들도 전부 얕은 복사!!! 겉은 다르지만 내부는 여전히 공유하니까 조심해야 한다.



## 🤔 중첩 구조가 없을 땐?

```python
a = [1, 2, 3, 4]
b = a[:]
b[1] = 0
print(a) # [1, 2, 3, 4]
print(b) # [1, 0, 3, 4]
```

이건 괜찮다. 왜냐면 숫자들은 immutable(불변 객체)이기 때문에 그냥 값이 복사된 것처럼 동작하니까.

## 🧃 json으로 복사하는 꿀팁

```python
import json

a = {'x': [1, 2]}
b = json.loads(json.dumps(a))

b['x'][0] = 999
print(a) # {'x': [1, 2]}
```

> 이건 편하긴 한데, 단점은 함수, 클래스, 복잡한 객체는 복사 못 한다는 점!



## ✨ 오늘의 깨달음 요약

복사 방식    겉 객체만 새로?    내부 객체도 새로?    언제 쓰면 좋을까
=    ❌    ❌    그냥 참조만 공유
copy.copy()    ✅    ❌    중첩 구조 없을 때
copy.deepcopy()    ✅    ✅    완전한 복사 필요할 때
json.dumps    ✅    ✅    JSON 타입일 때만 가능



> 오늘 얕은 복사랑 깊은 복사 개념 제대로 이해한 것 같아서 뿌듯하다!
> 앞으로 복사할 땐 구조부터 보고 신중하게 골라 써야겠다. 특히 중첩 구조일 땐 꼭 deepcopy()를 써야겠다.
