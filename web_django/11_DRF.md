# DRF

## API (Application Programming Interface)

> ë‘ ì†Œí”„íŠ¸ì›¨ì–´ê°€ ì„œë¡œ í†µì‹  í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜
> 
> í´ë¼ì´ì–¸íŠ¸-ì„œë²„ì²˜ëŸ¼ ì„œë¡œ ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì—ì„œ ìš”ì²­ê³¼ ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ ë§Œë“  ì²´ê³„

- ì†Œí”„íŠ¸ì›¨ì–´ì™€ ì†Œí”„íŠ¸ì›¨ì–´ ê°„ ì§€ì •ëœ ì •ì˜(í˜•ì‹)ìœ¼ë¡œ ì†Œí†µí•˜ëŠ” ìˆ˜ë‹¨
  
  - 'ì´ë ‡ê²Œ ìš”ì²­ì„ ë³´ë‚´ë©´,  ì´ë ‡ê²Œ ì •ë³´ë¥¼ ì œê³µ í•´ì¤„ ê²ƒì´ë‹¤'ë¼ëŠ” ë©”ë‰´ì–¼

#### Open API

> ëˆ„êµ¬ë‚˜ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ê³µê°œëœ ì™¸ë¶€ ì†Œí”„íŠ¸ì›¨ì–´ì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤



### Third Party (Open API)

> ì§ì ‘ ê°œë°œí•˜ì§€ ì•Šì€ ì™¸ë¶€ì˜ ì„œë¹„ìŠ¤ë‚˜ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì œê³µí•˜ê±°ë‚˜ í™œìš©í•˜ëŠ” ì£¼ì²´



## REST

> API Serverë¥¼ ê°œë°œí•˜ê¸° ìœ„í•œ ì¼ì¢…ì˜ ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ê³„ ë°©ë²•ë¡ 
> 
> APIë§ˆë‹¤ ì œê°ê°ì¸ êµ¬ì¡°ë¥¼ ì •ë¦¬í•˜ê³ , ëˆ„êµ¬ë‚˜ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë°©ì‹ìœ¼ë¡œ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ ê¸°ì¤€ì„ ì œì•ˆí•œ ê²ƒì´ ë°”ë¡œ REST



### RESTful API

> 'ìì›ì„ ì •ì˜'í•˜ê³  'ìì›ì— ëŒ€í•œ ì£¼ì†Œë¥¼ ì§€ì •'í•˜ëŠ” ì „ë°˜ì ì¸ ë°©ë²•ì„ ì„œìˆ 

- REST ì›ë¦¬ë¥¼ ë”°ë¥´ëŠ” ì‹œìŠ¤í…œì„ RESTful í•˜ë‹¤ê³  ë¶€ë¥¸ë‹¤
  
  > ê°ê° APIì„œë²„ êµ¬ì¡°ë¥¼ ì‘ì„±í•˜ëŠ” ëª¨ìŠµì´ ë„ˆë¬´ ë‹¤ë¥´ë‹ˆ ì–´ëŠì •ë„ ì•½ì†ì„ ë§Œë“¤ì–´ì„œ ë‹¤ê°™ì´ í†µì¼í•´ì„œ ì“°ì!



### RESTì—ì„œ ìì›ì„ ì •ì˜í•˜ê³  ì£¼ì†Œë¥¼ ì§€ì •í•˜ëŠ” ë°©ë²•

- ìì›ì˜ 'ì‹ë³„'
  
  - URI (URL)

- ìì›ì˜ 'í–‰ìœ„' - í–‰ë™(CRUD)
  
  - HTTP Methods (GET, POST, etc,,)

- ìì›ì˜ 'í‘œí˜„'
  
  - JSON ë°ì´í„° (ê¶ê·¹ì ìœ¼ë¡œ í‘œí˜„ë˜ëŠ” ë°ì´í„° ê²°ê³¼ë¬¼)

- ê°œë°œ ì‹œì—ëŠ” í•­ìƒ 'ìì› ì¤‘ì‹¬ + ë™ì‘ ëª…í™•í™” + ì¼ê´€ëœ ì‘ë‹µ í¬ë§·'

#### URI (Uniform Resource Identifier) - í†µí•© ìì› ì‹ë³„ì - ìì›ì˜ ì‹ë³„

> ì¸í„°ë„·ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ì‹ë³„í•˜ëŠ” ë¬¸ìì—´

- ê°€ì¥ ì¼ë°˜ì ì¸ URIëŠ” ì›¹ ì£¼ì†Œë¡œ ì•Œë ¤ì§„ URL (Uniform Resource Locator) - í†µí•© ìì› ìœ„ì¹˜

#### ìì›ì˜ ì‹ë³„

##### URL(Uniform Resource Locator) - í†µí•© ìì› ìœ„ì¹˜

> ì›¹ì—ì„œ ì£¼ì–´ì§„ ë¦¬ì†ŒìŠ¤ì˜ ì£¼ì†Œ

- ë„¤íŠ¸ì›Œí¬ ìƒì— ë¦¬ì†ŒìŠ¤ê°€ ì–´ë”” ìˆëŠ”ì§€ë¥¼ ì•Œë ¤ì£¼ê¸° ìœ„í•œ ì•½ì†

`http://www.example.com:80/path/to/myfile.html?key1=value1&key2=value2#SomewhereInTheDocument`

`http -> Scheme`://`www.example.com -> Domain Name`:`80 -> Port``/path/to/myfile.html -> Path to the file``?key1=value1&key2=value2 -> Parameters``#SomewhereInTheDocument -> Anchor`



- Scheme(or protocol)
  
  - ë¸Œë¼ìš°ì €ê°€ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•˜ëŠ” ë° ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê·œì•½
  
  - URLì˜ ì²«ë¶€ë¶„ì€ ë¸Œë¼ìš°ì €ê°€ ì–´ë–¤ ê·œì•½ì„ ì‚¬ìš©í•˜ëŠ”ì§€ ë‚˜íƒ€ëƒ„
  
  - ê¸°ë³¸ì ìœ¼ë¡œ ì›¹ì€ http(s)
    
    - ë©”ì¼ì„ ì—´ê¸°ìœ„í•œ mailto: íŒŒì¼ì„ ì „ì†¡í•˜ê¸° ìœ„í•œ ftp: ë“± ë‹¤ë¥¸ í”„ë¡œí† ì½œë„ ì¡´ì¬

- Domain name
  
  - ìš”ì²­ì¤‘ì¸ ì›¹ì„œë²„ë¥¼ ë‚˜íƒ€ëƒ„
  
  - ì–´ë–¤ ì›¹ ì„œë²„ê°€ ìš”êµ¬ë˜ëŠ” ì§€ë¥¼ ê°€ë¦¬í‚¤ë©° ì§ì ‘ IPì£¼ì†Œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ì§€ë§Œ, ì‚¬ëŒì´ ì™¸ìš°ê¸° ì–´ë µê¸° ë•Œë¬¸ì— ì£¼ë¡œ Domain Nameìœ¼ë¡œ ì‚¬ìš©
    
    - ë„ë©”ì¸ google.comì˜ ip ì£¼ì†ŒëŠ” 142.251.42.142

- Port
  
  - ì›¹ ì„œë²„ì˜ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ ì ì¸ ë¬¸(Gate)
  
  - HTTP í”„ë¡œí† ì½œì˜ í‘œì¤€ í¬íŠ¸
    
    - HTTP-80
    
    - HTTPS-443
  
  - í‘œì¤€ í¬íŠ¸ë§Œ ì‘ì„±ì‹œ ìƒëµ ê°€ëŠ¥

- Path
  
  - ì›¹ ì„œë²„ì˜ ë¦¬ì†ŒìŠ¤ ê²½ë¡œ
  
  - ì´ˆê¸°ì—ëŠ” ì‹¤ì œ íŒŒì¼ì´ ìœ„ì¹˜í•œ ë¬¼ë¦¬ì  ìœ„ì¹˜ë¥¼ ë‚˜íƒ€ëƒˆì§€ë§Œ ì˜¤ëŠ˜ë‚ ì€ ì‹¤ì œ ìœ„ì¹˜ê°€ ì•„ë‹Œ ì¶”ìƒí™”ëœ í˜•íƒœì˜ êµ¬ì¡°ë¥¼ í‘œí˜„
    
    - /articles/create/ë¼ëŠ” ì£¼ì†Œê°€ ì‹¤ì œ articles í´ë” ì•ˆì— create í´ë”ì•ˆì„ ë‚˜íƒ€ë‚´ëŠ” ê²ƒì€ ì•„ë‹˜

- Parameters
  
  - ì›¹ ì„œë²„ì— ì œê³µí•˜ëŠ” ì¶”ê°€ì ì¸ ë°ì´í„°
  
  - '&' ê¸°í˜¸ë¡œ êµ¬ë¶„ë˜ëŠ” key-value ìŒ ëª©ë¡
  
  - ì„œë²„ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì‘ë‹µí•˜ê¸° ì „ì— ì´ëŸ¬í•œ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¶”ê°€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŒ

- Anchor
  
  - ì¼ì¢…ì˜ ë¶ë§ˆí¬ë¥¼ ë‚˜íƒ€ë‚´ë©° ë¸Œë¼ìš°ì €ì— í•´ë‹¹ ì§€ì ì— ìˆëŠ” ì½˜í…ì¸ ë¥¼ í‘œì‹œ
  
  - '#' (fragment identifier, ë¶€ë¶„ ì‹ë³„ì) ì´í›„ ë¶€ë¶„ì€ ì„œë²„ì— ì „ì†¡ë˜ì§€ ì•ŠìŒ
  
  - https://docs. ~~~~/#quick-install-guideë¼ëŠ”ê²Œ ìˆìœ¼ë©´ #quick-install-guideëŠ” ì„œë²„ì— ì „ë‹¬ë˜ì§€ ì•Šê³  ë¸Œë¼ìš°ì €ì—ê²Œ í•´ë‹¹ ì§€ì ìœ¼ë¡œ ì´ë™í•  ìˆ˜ ìˆë„ë¡ í•¨

#### ìì›ì˜ í–‰ìœ„

##### HTTP Request Methods

> ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ í–‰ìœ„, ìˆ˜í–‰í•˜ê³ ì í•˜ëŠ” ë™ì‘ì„ ì •ì˜

- GET
  
  - ì„œë²„ì— ë¦¬ì†ŒìŠ¤ì˜ í‘œí˜„ì„ ìš”ì²­
  
  - GETì„ ì‚¬ìš©í•˜ëŠ” ìš”ì²­ì€ ë°ì´í„°ë§Œ ê²€ìƒ‰í•´ì•¼ í•¨

- POST
  
  - ë°ì´í„°ë¥¼ ì§€ì •ëœ ë¦¬ì†ŒìŠ¤ì— ì œì¶œ
  
  - ì„œë²„ì˜ ìƒíƒœë¥¼ ë³€ê²½

- PUT
  
  - ìš”ì²­í•œ ì£¼ì†Œì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ìˆ˜ì •

- DELETE
  
  - ì§€ì •ëœ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œ

##### HTTP response status codes

> íŠ¹ì • HTTP ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ ë˜ì—ˆëŠ”ã„´ì§€ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ëƒ„

- Informational responses(100-199)
  
  - ìš”ì²­ì„ ê³„ì† ì§„í–‰ ì¤‘ì´ë¼ëŠ” ì¤‘ê°„ ì‘ë‹µ

- Successful responses(200-299)
  
  - ìš”ì²­ì´ ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆìŒì„ ì˜ë¯¸

- Redirection messages(300-399)
  
  - ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ê°€ ë‹¤ë¥¸ ìœ„ì¹˜ë¡œ ì˜®ê²¨ì¡Œì„ ë•Œ ì‚¬ìš©

- Client error respose(400-499)
  
  - í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì— ë¬¸ì œê°€ ìˆì„ ë•Œ ë°˜í™˜

- Server error response(500-599)
  
  - ì„œë²„ ë‚´ë¶€ì˜ ë¬¸ì œë¡œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ì§€ ëª»í–ˆì„ ë•Œ ì‚¬ìš©



#### ìì›ì˜ í‘œí˜„

##### JSON ë°ì´í„°ë¥¼ ì‘ë‹µí•˜ëŠ” REST API ì„œë²„ë¡œì˜ ë³€í™˜

- ì„œë²„ëŠ” HTML í˜ì´ì§€ë¥¼ ë§Œë“¤ì§€ ì•Šê³ , (render X) JSON ë°ì´í„°ë§Œ ì‘ë‹µí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•  ìˆ˜ ìˆìŒ

- HTML ëŒ€ì‹  jSOnë§Œ ì „ë‹¬í•˜ë¯€ë¡œ ì‘ë‹µ ìš©ëŸ‰ì´ ì¤„ê³  ì²˜ë¦¬ ì†ë„ê°€ ë¹¨ë¼ì§

- DjangoëŠ” ë”ì´ìƒ Template ë¶€ë¶„ì— ëŒ€í•œ ì—­í• ì„ ë‹´ë‹¹í•˜ì§€ ì•Šê²Œ ë˜ë©°, Front-endì™€ Back-endê°€ ë¶„ë¦¬ë˜ì–´ êµ¬ì„± ë¨
  
  - ì „í†µì  Django ì•± êµ¬ì¡° -> í˜„ëŒ€ì  ë¶„ë¦¬ êµ¬ì¡°ë¡œì˜ ì „í™˜ ì˜ë¯¸

- ì´ì œë¶€í„° Djangoë¥¼ ì‚¬ìš©í•´ RESTful API ì„œë²„ë¥¼ êµ¬ì¶•í•  ê²ƒ



## DRF with Single Model

### Django REST framework

> Django ì—ì„œ RESTful API ì„œë²„ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬



#### Serialization(ì§ë ¬í™”)

> ì—¬ëŸ¬ ì‹œìŠ¤í…œì—ì„œ í™œìš©í•˜ê¸° ìœ„í•´ ë°ì´í„° êµ¬ì¡°ë‚˜ ê°ì²´ ìƒíƒœë¥¼ ì¬êµ¬ì„±í•  ìˆ˜ ìˆëŠ” í¬ë§·ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •
> 
> ì–´ë– í•œ ì–¸ì–´ë‚˜ í™˜ê²½ì—ì„œë„ ë‹¤ì‹œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í¬ë§·ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •

- ë°ì´í„° êµ¬ì¡°ëŠ” ê°ì²´ ìƒíƒœë¥¼ ë‚˜ì¤‘ì— ì¬êµ¬ì„± í•  ìˆ˜ ìˆëŠ” í¬ë§·ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •

- ë³€í™˜ëœ ë°ì´í„°ëŠ” ë‹¤ë¥¸ í”„ë¡œê·¸ë¨, ë‹¤ë¥¸ ì–¸ì–´, ë‹¤ë¥¸ ì»´í“¨í„°ì—ì„œë„ ë‹¤ì‹œ ì›ë˜ì˜ êµ¬ì¡°ë¡œ ë³µì›í•  ìˆ˜ ìˆë‹¤

#### Serializer

> Serializationì„ ì§„í–‰í•˜ì—¬ Serialized dataë¥¼ ë°˜í™˜í•´ì£¼ëŠ” í´ë˜ìŠ¤

#### ModelSerializer

> Django ëª¨ë¸ê³¼ ì—°ê²°ëœ Serializer í´ë˜ìŠ¤
> 
> ì¼ë°˜ Serializerì™€ ë‹¬ë¦¬ ì‚¬ìš©ì ì…ë ¥ ë°ì´í„°ë¥¼ ë°›ì•„ ìë™ìœ¼ë¡œ ëª¨ë¸ í•„ë“œì— ë§ì¶”ì–´ Serializationì„ ì§„í–‰

```python
# articles/serializers.py
from rest_framework import serializers
from .models import Article


class ArticleSerializer(serializers.ModelSerializer):
    class Meta:
        model = Article
        fields = '__all__'

```



#### URLê³¼ HTTP request methods ì„¤ê³„

##### ğŸ“Œ ìš”ì²­ ë©”ì„œë“œ êµ¬ì„±í‘œ

| URL           | GET     | POST | PUT     | DELETE  |
| ------------- | ------- | ---- | ------- | ------- |
| `articles/`   | ì „ì²´ ê¸€ ì¡°íšŒ | ê¸€ ì‘ì„± | ì „ì²´ ê¸€ ìˆ˜ì • | ì „ì²´ ê¸€ ì‚­ì œ |
| `articles/1/` | 1ë²ˆ ê¸€ ì¡°íšŒ | Â·    | 1ë²ˆ ê¸€ ìˆ˜ì • | 1ë²ˆ ê¸€ ì‚­ì œ |

> *â€» í‘œ1. Django DRF í”„ë¡œì íŠ¸ HTTP requests method ì„¤ê³„ë„*

---

#### TIP

- URLì— ë™ì‘ëª…(get, create)ì„ ë„£ì§€ ë§ê³ , **ìì› ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ê³„**

- ë³µìˆ˜í˜•/ë‹¨ìˆ˜í˜• í˜¼ìš©ì€ í˜¼ë€ì„ ì£¼ë‹ˆ **ì¼ê´€ë˜ê²Œ ì‚¬ìš©**

- ê¹Šì€ ì¤‘ì²© êµ¬ì¡°ëŠ” í”¼í•˜ê³ , í•„ìš”í•œ ê²½ìš° ê´€ê³„ë¥¼ ëª…í™•íˆ í‘œí˜„

- ê¸°ëŠ¥ì´ ì•„ë‹Œ **ìì›ì˜ ìœ„ì¹˜ê°€ URL**, ë™ì‘ì€ **HTTP ë©”ì„œë“œë¡œ êµ¬ë¶„**



### GET method - ì¡°íšŒ

#### GET - List (1/3)

- ê²Œì‹œê¸€ ë°ì´í„° **ëª©ë¡ ì¡°íšŒí•˜ê¸°**

- ê²Œì‹œê¸€ ë°ì´í„° ëª©ë¡ì„ ì œê³µí•˜ëŠ” **ArticleListSerializer ì •ì˜**

```python
# articles/serializers.py
from rest_framework import serializers
from .models import Article


class ArticleListSerializer(serializers.ModelSerializer):
    class Meta:
        model = Article
        fields = (
            'id',
            'title',
            'content',
        )
```



- `url` ë° `view` í•¨ìˆ˜ ì‘ì„±í•˜ê¸°

```python
# articles/views.py

from rest_framework.response import Response
from rest_framework.decorators import api_view

from .models import Article
from .serializers import ArticleListSerializer


@api_view(['GET'])
def article_list(request):
    articles = Article.objects.all()
    serializer = ArticleListSerializer(articles, many=True)
    return Response(serializer.data)

```

- DRFì˜ ëª¨ë“  ë·° í•¨ìˆ˜ëŠ” ë°˜ë“œì‹œ api_view ë°ì½”ë ˆì´í„°ê°€ í•„ìˆ˜

- Serializerì˜ ì²«ë²ˆì§¸ ì¸ìê°€ QuerySetì´ë©´ manyë¥¼ ê¼­ Trueë¡œ í•´ì¤˜ì•¼í•¨

- Serializer ê°ì²´ì—ì„œ jsonë§Œ ì¶”ì¶œ(.data ì†ì„±)í•œ ê²ƒì„ ì‘ë‹µ

>  `@api_view`  
> í•¨ìˆ˜í˜• viewì—ì„œ ì‚¬ìš©í•  HTTP ë©”ì„œë“œë¥¼ ëª…ì‹œí•´ì£¼ëŠ” **DRF ì „ìš© ë°ì½”ë ˆì´í„°**



```py
# articles/urls.py
urlpatterns = [
    path('articles/', views.article_list),
    ...
]

```



#### âœ… `api_view` decorator

- DRF view í•¨ìˆ˜ì—ì„œëŠ” **í•„ìˆ˜ë¡œ ì‘ì„±**ë˜ë©°, view í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ê¸° ì „ **HTTP ë©”ì„œë“œë¥¼ í™•ì¸**í•¨

- í—ˆìš©í•˜ë„ë¡ ì§€ì •í•œ ë©”ì„œë“œì— ëŒ€í•´ì„œë§Œ ì˜¬ë°”ë¥´ê²Œ ì‘ë‹µí•˜ë©°,  
  ëª©ë¡ì— ì¶”ê°€í•˜ì§€ ì•Šì€ ë‹¤ë¥¸ ë©”ì„œë“œ ìš”ì²­ì— ëŒ€í•´ì„œëŠ” **405 Method Not Allowed** ë¡œ ì‘ë‹µ

- DRF view í•¨ìˆ˜ê°€ ì‘ë‹µí•´ì•¼ í•˜ëŠ” **HTTP ë©”ì„œë“œ ëª©ë¡ì„ ì‘ì„±**í•´ì•¼ í•¨

---

##### âœ… TIP

> `@api_view` ë°ì½”ë ˆì´í„°ë¥¼ ë¹ ëœ¨ë¦¬ë©´,  
> í•¨ìˆ˜ê°€ ë‹¨ìˆœí•œ Django ë·°ë¡œ ì¸ì‹ë˜ì–´ API ìš”ì²­ì´ ì œëŒ€ë¡œ ì²˜ë¦¬ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  
> â†’ **DRFì—ì„œëŠ” ë°˜ë“œì‹œ `@api_view([...])`ë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.**
> 
> ìƒëµí•  ê²½ìš° 500ë²ˆ ì—ëŸ¬ë‚˜ HTML ì‘ë‹µì´ ë°˜í™˜ë˜ëŠ” ë“±  
> **ì›ì¸ì„ ì°¾ê¸° ì–´ë ¤ìš´ ì˜¤ë¥˜**ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> 
> âœ… **ìš”ì²­ì´ ì‹¤íŒ¨í•  ë•ŒëŠ” ë°ì½”ë ˆì´í„° ëˆ„ë½ ì—¬ë¶€ë¶€í„° í™•ì¸í•˜ì„¸ìš”.**



## POST method - ìƒì„±

- ì„±ê³µí•˜ë©´ 201 create ì‘ë‹µ, ì‹¤íŒ¨í•˜ë©´ 400 bad request ì‘ë‹µ



```python
# articles/views.py
from rest_framework import status
from rest_framework.response import Response
from rest_framework.decorators import api_view

from .models import Article
from .serializers import ArticleListSerializer, ArticleSerializer


@api_view(['GET', 'POST'])   # ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ í—ˆìš©í•  HTTP ë©”ì„œë“œ ì§€ì •
def article_list(request):

    # âœ… GET: ì „ì²´ ê¸€ ì¡°íšŒ
    if request.method == 'GET':
        articles = Article.objects.all()
        serializer = ArticleListSerializer(articles, many=True)
        return Response(serializer.data)

    # âœ… POST: ê¸€ ìƒì„±
    elif request.method == 'POST':
        serializer = ArticleSerializer(data=request.data)
        if serializer.is_valid():
            serializer.save()
            return Response(serializer.data, status=status.HTTP_201_CREATED)
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

```



## POST method - ì‚­ì œ

- ìš”ì²­ì— ëŒ€í•œ **ë°ì´í„° ì‚­ì œê°€ ì„±ê³µ**í–ˆì„ ê²½ìš°  
  â†’ **204 No Content** ì‘ë‹µ ë°˜í™˜



```python
# articles/views.py
from rest_framework import status
from rest_framework.response import Response
from rest_framework.decorators import api_view

from .models import Article
from .serializers import ArticleSerializer


@api_view(['GET', 'DELETE'])
def article_detail(request, article_pk):
    article = Article.objects.get(pk=article_pk)

    # âœ… GET: ë‹¨ì¼ ê²Œì‹œê¸€ ì¡°íšŒ
    if request.method == 'GET':
        serializer = ArticleSerializer(article)
        return Response(serializer.data)

    # âœ… DELETE: ê²Œì‹œê¸€ ì‚­ì œ
    elif request.method == 'DELETE':
        article.delete()
        return Response(status=status.HTTP_204_NO_CONTENT)

```

##### ê²Œì‹œê¸€ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê³ , ì‚­ì œëœ ê²Œì‹œê¸€ ì •ë³´ë¥¼ ë°˜í™˜í•˜ê¸°

- ì¶”ê°€ì ì¸ ë°ì´í„°ë¥¼ ì œê³µí•˜ë¯€ë¡œ **200 OK ì‘ë‹µ**

- ì‚­ì œëœ ê²Œì‹œê¸€ì˜ ì •ë³´ë¥¼ ì‘ë‹µìœ¼ë¡œ ë³´ë‚´ê¸°

---

##### 1. ë°˜í™˜í•  ë°ì´í„°ë¥¼ ì •ì˜í•˜ëŠ” ì´ìœ 

- `delete()` ì‹¤í–‰ ì‹œ í•´ë‹¹ ê°ì²´ëŠ” **DBì—ì„œ ì¦‰ì‹œ ì‚­ì œë¨**

- ë”°ë¼ì„œ ì‚­ì œ í›„ì—ëŠ” í•´ë‹¹ ê°ì²´ì˜ ë°ì´í„°ë¥¼ ë” ì´ìƒ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ

- âœ… **ì‚­ì œ ì „ì— í•„ìš”í•œ ê°’ì„ ë¯¸ë¦¬ ë³€ìˆ˜ë¡œ ì €ì¥**í•´ë‘ê³ ,  
  ì‚­ì œ ì´í›„ì—ëŠ” ì €ì¥í•œ ê°’ì„ ì´ìš©í•˜ëŠ” ê²ƒì´ ì•ˆì „í•¨

---

##### 2. Responseì˜ ì²« ë²ˆì§¸ ì¸ìë¡œ ì „ë‹¬

ì‚­ì œëœ ê²Œì‹œê¸€ì— ëŒ€í•œ ë©”ì‹œì§€ë¥¼ JSON í˜•íƒœë¡œ ë°˜í™˜í•¨.



```python
# articles/views.py

@api_view(['GET', 'DELETE'])
def article_detail(request, article_pk):
    article = Article.objects.get(pk=article_pk)

    ...

    # âœ… DELETE: ì‚­ì œ + ì‚­ì œ ì •ë³´ ë°˜í™˜
    elif request.method == 'DELETE':
        pk = article.pk
        title = article.title

        article.delete()

        data = {
            'message': f'{pk}ë²ˆ ê²Œì‹œê¸€ "{title}"ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.'
        }

        return Response(data, status=status.HTTP_200_OK)

```



## PUT method - ìˆ˜ì •

- ìš”ì²­ì— ëŒ€í•œ ë°ì´í„° ìˆ˜ì •ì´ ì„±ê³µí–ˆì„ ê²½ìš°ì—ëŠ” **200 OK ì‘ë‹µ**

```python
# articles/views.py

@api_view(['GET', 'DELETE', 'PUT'])
def article_detail(request, article_pk):
    article = Article.objects.get(pk=article_pk)
    ...

    # âœ… PUT: ê²Œì‹œê¸€ ìˆ˜ì •
    elif request.method == 'PUT':
        serializer = ArticleSerializer(article, data=request.data)
        # serializer = ArticleSerializer(instance=article, data=request.data, partial=False)
        if serializer.is_valid(raise_exception=True):
            serializer.save()
            return Response(serializer.data)
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

```





## PATCH method - ìˆ˜ì •

- ìš”ì²­ì— ëŒ€í•œ ë°ì´í„° ìˆ˜ì •ì´ ì„±ê³µí–ˆì„ ê²½ìš°ì—ëŠ” **200 OK ì‘ë‹µ**

- **PATCH**ëŠ” ë¦¬ì†ŒìŠ¤ ì „ì²´ê°€ ì•„ë‹Œ, **ì¼ë¶€ë§Œ ìˆ˜ì •**í•  ë•Œ ì‚¬ìš©í•˜ëŠ” HTTP ë©”ì„œë“œ

- Django REST Frameworkì—ì„œëŠ”  
  âœ… `partial=True` ì„¤ì •ì„ í†µí•´ **ë¶€ë¶„ ìˆ˜ì •(PARTIAL UPDATE)** ìˆ˜í–‰ ê°€ëŠ¥

- ì˜ˆì‹œ: ê²Œì‹œê¸€ì˜ `title`ë§Œ ë°”ê¾¸ê³  ì‹¶ì„ ë•Œ  
  â†’ ì „ì²´ í•„ë“œë¥¼ ë³´ë‚¼ í•„ìš” ì—†ì´ í•´ë‹¹ í•„ë“œë§Œ ì „ë‹¬í•˜ë©´ ë¨

```python
# articles/views.py

@api_view(['GET', 'DELETE', 'PATCH'])
def article_detail(request, article_pk):
    ...

    # âœ… PATCH: ì¼ë¶€ í•„ë“œë§Œ ìˆ˜ì •
    elif request.method == 'PATCH':
        serializer = ArticleSerializer(article, data=request.data, partial=True)
        if serializer.is_valid(raise_exception=True):
            serializer.save()
            return Response(serializer.data)
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

```



#### âœ… PUT vs PATCH

| í•­ëª©            | PUT                 | PATCH                 |
| ------------- | ------------------- | --------------------- |
| **ìˆ˜ì • ëŒ€ìƒ**     | ì „ì²´ ë¦¬ì†ŒìŠ¤              | ë¦¬ì†ŒìŠ¤ì˜ ì¼ë¶€ í•„ë“œ            |
| **ìš”ì²­ ë°ì´í„° ìš”êµ¬** | ëª¨ë“  í•„ìˆ˜ í•„ë“œ í¬í•¨         | ìˆ˜ì •í•  í•„ë“œë§Œ í¬í•¨ ê°€ëŠ¥         |
| **ì‚¬ìš© ëª©ì **     | ì „ì²´ ë®ì–´ì“°ê¸°(êµì²´)         | ë¶€ë¶„ ìˆ˜ì •(ì¼ë¶€ í•„ë“œë§Œ ê°±ì‹ )      |
| **DRF ì„¤ì •**    | ê¸°ë³¸(`partial=False`) | ë°˜ë“œì‹œ `partial=True` í•„ìš” |

---

##### âœ… TIP

- ì¼ë¶€ í•„ë“œë§Œ ìˆ˜ì •í•  ë• ë°˜ë“œì‹œ **PATCH**ë¥¼ ì‚¬ìš©í•´ì•¼ RESTfulí•œ ì„¤ê³„

- PUT ìš”ì²­ì—ì„œ `partial=True`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ í¸ì˜ìƒ í—ˆìš©ë˜ê¸°ë„ í•˜ì§€ë§Œ, **REST ì›ì¹™ì—ëŠ” ì–´ê¸‹ë‚¨**


