# AbstractUser

# Model Fields 심화

## Choices 속성

> 모델 필드에 미리 정해진 선택지를 부여하는 속성
> 
> 이 속성을 사용하면, db에는 실제 값이 저장되지만 사용자에게는 더 이해하기 쉬운 이름(레이블)을 보여주는 드롭다운 메뉴를 손쉽게 만들 수 있음

```py
# todos/models.py
class Todo(models.Model):
    STATUS_CHOICES = [
        ('TODO','TODO'),
        ('DOING','DOING'),
        ('DONE','DONE'),
]
    status = models.CharField(
        max_length=5,
        choices=STATUS_CHOICES,
        default='TODO',
)
```

## PositiveIntegerField

> 0을 포함한 양의 정수만 저장할 수 있도록 강제하는 Django 모델 필드

- db에서는 integer이지만 유효성 검사에서 음수값이 걸림. 데이터의 무결성을 보장

## blank & null

> 모두 비어있음과 관련된 설정처럼 보이지만 동작 레벨이 서로 다름

### blank=True의 의미

1. form 유효성 검사 차원
   
   - blank=True로 지정된 필드는 폼에서 필수 입력이 아님
   
   - admin이나 modelform에서 해당 필드를 비워 제출해도 검증 에러가 발생하지 않음

2. DB와는 무관
   
   - 단지 django의 form이나 admin에서 비워둘 수 있다는 의미
   
   - db는 빈문자열로 저장될 수 있지만 실제로 db가 null 상태가 되는 것은 아님(기본적으로 null=False일때)

### null=True의 의미

1. db 스키마 레벨
   
   - null=True이면 해당 컬럼에 null값을 저장 가능

2. form 검증과는 별개
   
   - django form에서 blank=True가 아니면 여전히 필수 입력으로 간주
   
   - db에서 null을 허용하더라도, form에서 공백 제출을 막을 수 있음

### 문자열 필드에 null=True를 설정하는 것은 일반적으로 권장하지 않음

- 두 가지 종류의 빈 값이기 때문에

- 문자열 필드에 null=True를 허용하면 db에 값이 없음을 나타내는 상태가 두가지가 되어버림
  
  - null: db 수준의 값이없음
  
  - 빈문자열(''): 길이가 0인 문자열 값이 존재함

- 대부분의 웹 앱에서는 이 두 상태를 굳이 구분해서 처리해야할 이유가 없음. 사용자가 아무것도 입력하지 않았다는 것을 표현하는 데에는 빈 문자열 하나만으로 충분

### 정리

- blank=True : 웹 페이지의 서류 양식에 대한 규칙
  
  - 이 칸은 비워둔 채로 제출해도 괜찮습니다.
  
  - 유효성 검사 단계과 관련

- null=True : 데이터가 저장되는 서류보관함(db)에 대한 규칙
  
  - 이 칸에 해당하는 서류가 아예 없어도 (null) 괜찮습니다. 
  
  - db 스키마 단계와 관련

## Django Form 심화

> 다양한 모델 필드를 정의했지만, 사용자에게 입력을 받으려면 결국 HTML Form이 필요함

- Django Form을 활용한 이점
  
  - 자동 검증과 편의성, 필요하다면 modelform을 통해 db까지 손쉽게 연결할 수 있음

## MultipleChoiceField

> Form에서 여러 개의 선택지를 동시에 선택할 수 있도록 해주는 필드
> 
> 사용자가 제출하면, 선택된 값들은 파이썬 리스트 형태로 처리

#### 핵심 특징 및 사용법

- HTML 렌더링
  
  - 기본적으로 여러 줄 선택이 가능한 <select multiple> 태그로 렌더링 되지만, widget 옵션을 통해 체크박스(checkbox) 형태로 더 편리하게 바꿀 수 있음
