# Database Modeling

> db ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê¸° ìœ„í•´ ë°ì´í„°ì˜ êµ¬ì¡°ì™€ ê´€ê³„, ì œì•½ ì¡°ê±´ ë“±ì„ ì„¤ê³„í•˜ì—¬ íš¨ìœ¨ì ì´ê³  ì¼ê´€ì„± ìˆëŠ” ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ê³¼ì •
> 
> ëª¨ë¸ë§ì„ í†µí•´ **ì„±ëŠ¥, ë¬´ê²°ì„±, ì‹ ë¢°ì„±**ì„ ë³´ì¥í•  ìˆ˜ ìˆìŒ

- íš¨ìœ¨ì„±
  
  - êµ¬ì¡°ë¥¼ ì˜ ì„¤ê³„í•˜ë©´ ì¿¼ë¦¬ ì„±ëŠ¥ê³¼ ì €ì¥ íš¨ìœ¨ì´ í–¥ìƒ

- ì¼ê´€ì„±
  
  - ì¤‘ë³µê³¼ ì´ìƒ í˜„ìƒì„ ìµœì†Œí™”í•˜ì—¬, ë°ì´í„°ê°€ ì„œë¡œ ëª¨ìˆœë˜ê±°ë‚˜ ì¶©ëŒí•˜ì§€ ì•Šë„ë¡ í•¨

- ë¬´ê²°ì„± ë³´ì¥
  
  - ë¬´ê²°ì„± ì œì•½ ì¡°ê±´ì„ ëª¨ë¸ë§ ë‹¨ê³„ì—ì„œ ì„¤ì •í•´ë‘ì–´, ë¶€ì ì ˆí•œ ë°ì´í„°ë¥¼ ë°©ì§€

## ë¬´ê²°ì„±

> ë°ì´í„°ë² ì´ìŠ¤ê°€ ì˜ëª»ëœ ë°ì´í„°ì˜ ì‚½ì…, ìˆ˜ì •, ì‚­ì œë¡œë¶€í„° ë³´í˜¸ë˜ì–´ ë°ì´í„°ì˜ ì¼ê´€ì„±ê³¼ ì‹ ë¢°ì„±ì„ ìœ ì§€í•˜ëŠ” ê²ƒ

### ê°œì²´ ë¬´ê²°ì„±

> ê¸°ë³¸í‚¤(PK)ê°€ ìœ ì¼(ì¤‘ë³µ ë¶ˆê°€)í•˜ê³  `NULL` ê°’ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” ì œì•½

1. ê° ë ˆì½”ë“œëŠ” ìœ ì¼í•œ ì‹ë³„ìë¥¼ ê°€ì ¸ì•¼í•¨

2. ê¸°ë³¸í‚¤ëŠ” NULL ê°’ì„ ê°€ì§ˆ ìˆ˜ ì—†ìŒ

### ì°¸ì¡° ë¬´ê²°ì„±

> ì™¸ë˜ í‚¤ì™€ ê´€ë ¨ëœ ì œì•½ìœ¼ë¡œ, ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê¸°ë³¸ í‚¤ë¥¼ ì°¸ì¡°í•˜ì§€ ëª»í•˜ë„ë¡ í•˜ëŠ” ê·œì¹™

1. ì™¸ë˜ í‚¤ëŠ” ì°¸ì¡° ëŒ€ìƒ í…Œì´ë¸Œë¥´ì´ ê¸°ë³¸ í‚¤ ê°’ì„ ì°¸ì¡°í•˜ê±°ë‚˜ `NULL`ì„ ê°€ì§ˆ ìˆ˜ ìˆìŒ

2. ì°¸ì¡° ëŒ€ìƒ í…Œì´ë¸”ì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê¸°ë³¸ í‚¤ ê°’ì€ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ

3. ì™¸ë˜ í‚¤ë¡œ ì—°ê²°ëœ ë ˆì½”ë“œë¥¼ ì‚­ì œ, ìˆ˜ì •í•  ë•Œ, ì—°ì‡„ ì‘ì—…(`ON DELETE CASCADE`) ë˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í†µí•´ ë¬´ê²°ì„± ìœ ì§€

### ë„ë©”ì¸ ë¬´ê²°ì„±

> ê° ì†ì„±ì´ ì •ì˜ëœ ë„ë©”ì¸(ê°’ì˜ ë²”ìœ„, í˜•ì‹)ì„ ë²—ì–´ë‚˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ì œì•½

1. ì†ì„±ë³„ë¡œ ë°ì´í„° íƒ€ì…, ê¸¸ì´, ë²”ìœ„ ë“±ì„ ì •ì˜í•´ì•¼ í•¨

2. ê°’ì´ í•´ë‹¹ ë²”ìœ„(ë„ë©”ì¸)ì„ ë²—ì–´ë‚˜ë©´ ì‚½ì…, ìˆ˜ì •ì´ ì œí•œë˜ê±°ë‚˜ ì˜¤ë¥˜ ë°œìƒ



### ê·¸ì™¸ ë¬´ê²°ì„±

#### ê³ ìœ ì„±(UNIQUE)

- íŠ¹ì • ì»¬ëŸ¼ì˜ ê°’ì´ í…Œì´ë¸” ë‚´ì—ì„œ ì¤‘ë³µë˜ì§€ ì•Šë„ë¡ ì œí•œ
  
  - ì´ë©”ì¼ ì£¼ì†ŒëŠ” í•œ ì‚¬ìš©ìê°€ í•˜ë‚˜ë§Œ ë“±ë¡ ê°€ëŠ¥

#### NULL ë¬´ê²°ì„±(NOT NULL)

- íŠ¹ì • ì»¬ëŸ¼ì´ NULL ê°’ì„ ê°€ì§ˆ ìˆ˜ ì—†ë„ë¡ í•˜ëŠ” ì œì•½

#### ì¼ë°˜ ë¬´ê²°ì„±

- ìœ„ì˜ íŠ¹ì • ì œì•½ ì¡°ê±´ ì™¸ì—ë„, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ë”°ë¼ ì¶”ê°€ë¡œ ì •ì˜í•˜ëŠ” ë¬´ê²°ì„± ê·œì¹™
  
  - ì€í–‰ ì”ê³ ê°€ 0 ë¯¸ë§Œì´ ë˜ì§€ ì•Šë„ë¡ í•˜ê±°ë‚˜, ì¬ê³  ìˆ˜ëŸ‰ì´ ìŒìˆ˜ê°€ ë˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ê·œì¹™



## ë°ì´í„° ë² ì´ìŠ¤ ëª¨ë¸ë§ ì§„í–‰

`ìš”êµ¬ì‚¬í•­ ìˆ˜ì§‘ ë° ë¶„ì„` -> `ê°œë…ì  ì„¤ê³„` -> `ë…¼ë¦¬ì  ì„¤ê³„` -> `ë¬¼ë¦¬ì  ì„¤ê³„`

### 1. ìš”êµ¬ì‚¬í•­ ìˆ˜ì§‘ ë° ë¶„ì„

> ì–´ë–¤ ì¢…ë¥˜ì˜ ë°ì´í„°ë¥¼ ì •ë¦¬í•˜ëŠ”ì§€ ì •ë³´ ìˆ˜ì§‘í•˜ê³  ì–´ë–¤ ì‘ì—…ì„ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ”ì§€ íŒŒì•…í•˜ëŠ” ë‹¨ê³„

- ê°œì²´ 
  
  - ì—…ë¬´ì— í•„ìš”í•˜ê³  ìœ ìš©í•œ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ì§‘í•©ì ì¸ ê²ƒ
  
  - ê³ ê°, ìƒí’ˆ

- ì†ì„±
  
  - ê´€ë¦¬í•˜ê³ ì í•˜ëŠ” ê²ƒì˜ ì˜ë¯¸ë¥¼ ë” ì´ìƒ ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„ë¦¬ë˜ì§€ ì•Šì€ ë°ì´í„° ë‹¨ìœ„
  
  - ê³ ê°ëª…, ê³ ê° ì „í™”ë²ˆí˜¸, ìƒí’ˆëª…, ìƒí’ˆ ê°€ê²©

- ê´€ê³„
  
  - ê°ì²´ ì‚¬ì´ì˜ ë…¼ë¦¬ì ì¸ ì—°ê´€ì„±ì„ ì˜ë¯¸í•˜ëŠ” ê²ƒ
  
  - ê³ ê°ì€ ë‹¤ìˆ˜ì˜ ìƒí’ˆì„ ì£¼ë¬¸, ìƒí’ˆì€ ë‹¤ìˆ˜ì˜ ê³ ê°ë“¤ì—ê²Œ íŒë§¤ë  ìˆ˜ ìˆìŒ

### 2. ê°œë…ì  ì„¤ê³„

> ìš”êµ¬ì‚¬í•­ì„ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì˜ ê°œë…ì  ëª¨ë¸ì„ ì„¤ê³„
> 
> ê°œì²´ì™€ ê´€ê³„ë¥¼ ì‹ë³„í•˜ê³  ê°œì²´ ê°„ì˜ ê´€ê³„ë¥¼ ì •ì˜í•˜ì—¬ ER Diagramì„ ì‘ì„±

### 3. ë…¼ë¦¬ì  ì„¤ê³„

> ê°œë…ì  ì„¤ê³„(ERD)ë‹¨ê³„ì—ì„œ ì •í•œ ë°ì´í„°ì˜ êµ¬ì¡°ë¥¼, ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” í…Œì´ë¸” í˜•íƒœë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •

- ã…‡
  
  - ì˜ˆë¥¼ ë“¤ì–´, ê°œë…ì  ì„¤ê³„ì—ì„œ ë„ì¶œëœ N:M ê´€ê³„ëŠ”, ë…¼ë¦¬ì  ì„¤ê³„ ë‹¨ê³„ì—ì„œ ì¤‘ê°œ í…Œì´ë¸”ì„ ìƒì„±í•˜ì—¬ ë‘ ê°œì˜ ë‹¤ëŒ€ì¼ N:1 ê´€ê³„ë¡œ í•´ì†Œí•´ì•¼ í•¨
  
  - ê°œë…ì  ì„¤ê³„ N:M ê³ ê° - ìƒí’ˆ
  
  - ë…¼ë¦¬ì  ì„¤ê³„ (1:N, N:1) ê³ ê°(1) - ì£¼ë¬¸(N) - ìƒí’ˆ(1)

- ê°œë…ì  ì„¤ê³„ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë…¼ë¦¬ì  êµ¬ì¡°ë¥¼ ì„¤ê³„

- í…Œì´ë¸”, ì¹¼ëŸ¼, ì œì•½ ì¡°ê±´ ë“±ê³¼ ê°™ì€ êµ¬ì²´ì ì¸ ë°ì´í„°ë² ì´ìŠ¤ ê°œì²´ë¥¼ ì •ì˜

- ì •ê·œí™”ë¥¼ ìˆ˜í–‰í•˜ì—¬ ë°ì´í„°ì˜ ì¤‘ë³µì„ ìµœì†Œí™”í•˜ê³  ì¼ê´€ì„±ì„ ìœ ì§€



### 4. ë¬¼ë¦¬ì  ì„¤ê³„

> ë…¼ë¦¬ì  ì„¤ê³„ë¥¼ ê¸°ë°˜ìœ¼ë¡œ dbë¥¼ ì‹¤ì œ ì €ì¥ ë° ìš´ì˜ í•  ìˆ˜ ìˆëŠ” í˜•íƒœë¡œ ë³€í™˜í•˜ëŠ ë‹¨ê³„

- í…Œì´ë¸”ì˜ ì¸ë±ìŠ¤, íŒŒí‹°ì…˜, í´ëŸ¬ìŠ¤í„°ë§ ë“± ë¬¼ë¦¬ì ì¸ êµ¬ì¡°ì™€ ì ‘ê·¼ ë°©ì‹ì„ ê²°ì •

- ë³´ì•ˆ, ë°±ì—… ë° ë³µêµ¬, ì„±ëŠ¥ ìµœì í™” ë“±ì„ ê³ ë ¤í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„¤ì •



## ì •ê·œí™”(Normalization)

> ë°ì´í„° ì¤‘ë³µì„ ìµœì†Œí™”í•˜ê³ , ì´ìƒ í˜„ìƒì„ ì˜ˆë°©í•˜ë©°, ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡° ë³€ê²½ ì‹œ ì¬ì‘ì—…ì„ ì¤„ì´ëŠ” ëª©ì ìœ¼ë¡œ í…Œì´ë¸”ì„ êµ¬ì¡°í™” í•˜ëŠ” ê³¼ì •

1. ì¤‘ë³µ ìµœì†Œí™”
   
   - ë¶ˆí•„ìš”í•œ ì¤‘ë³µ ë°ì´í„°ë¥¼ ì œê±°í•´ ì¼ê´€ì„± ìœ ì§€

2. ì´ìƒ í˜„ìƒ ë°©ì§€
   
   - ì‚½ì…, ê°±ì‹ , ì‚­ì œ ì‘ì—… ì‹œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¶ˆì¼ì¹˜ ë¬¸ì œ ì˜ˆë°©

3. ìœ ì—°ì„± í–¥ìƒ
   
   - ë°ì´í„° ë² ì´ìŠ¤ êµ¬ì¡° ë³€ê²½ ì‹œ ì˜í–¥ì„ ë°›ëŠ” ì˜ì—­ì„ ìµœì†Œí™”í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì„

### ì´ìƒì—°ìƒ

> ë¹„ì •ìƒì ì¸ ë°ì´í„° ë² ì´ìŠ¤ ì„¤ê²Œë¡œ ì¤‘ë³µëœ ë°ì´í„°ê°€ ë§ì•„ì ¸ ì‚½ì…, ê°±ì‹ , ì‚­ì œ ë“±ì˜ ì—°ì‚°ì—ì„œ ë¹„ì¼ê´€ì„±ì´ ìƒê¸°ëŠ” ë¬¸ì œ

1. ì‚½ì…ì´ìƒ
   
   - ë°ì´í„°ë¥¼ ì‚½ì…í•˜ê¸° ìœ„í•´ ë¶ˆí•„ìš”í•œ ë°ì´í„°ë„ í•¨ê»˜ ì‚½ì…í•´ì•¼í•˜ëŠ” ë¬¸ì œ

2. ê°±ì‹  ì´ìƒ
   
   - ì¤‘ë³µëœ ë°ì´í„° ì¤‘ ì¼ë¶€ë§Œ ë³€ê²½ë˜ì–´ ë°ì´í„° ë¶ˆì¼ì¹˜ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œ

3. ì‚­ì œ ì´ìƒ
   
   - ì–´ë–¤ ë°ì´í„°ë¥¼ ì‚­ì œí•  ë•Œ ë°˜ë“œì‹œ ìˆì–´ì•¼ í•˜ëŠ ì •ë³´ê¹Œì§€ ê°™ì´ ì‚¬ë¼ì§€ëŠ” ë¬¸ì œ



### ì •ê·œí™” ë‹¨ê³„

#### ì œ 1 ì •ê·œí˜• (1NF)

> ê° ì†ì„±ì´ ì›ìê°’, ì¦‰ í•˜ë‚˜ì˜ ê°’ë§Œ ê°€ì ¸ì•¼ í•¨

#### ì œ 2 ì •ê·œí˜• (2NF)

> ì œ 1ì •ê·œí˜•ì„ ë§Œì¡±í•˜ë©´ì„œ PKê°€ ì•„ë‹Œ ëª¨ë“  ì†ì„±ì´ PKì— ì™„ì „ í•¨ìˆ˜ ì¢…ì†ë˜ì–´ì•¼ í•œë‹¤

#### ì œ 3 ì •ê·œí˜• (3NF)

> ì œ 2 ì •ê·œí˜•ì„ ë§Œì¡±í•˜ë©´ì„œ ëª¨ë“  ì†ì„±ì´ PKì— ì´í–‰ì  í•¨ìˆ˜ ì¢…ì†ì´ ë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤

#### BCNF (Boyce Codd Normalization Form)

> ì œ 3 ì •ê·œí˜•ì„ ë§Œì¡±í•˜ë©´ì„œ, ëª¨ë“  ê²°ì •ìê°€ í›„ë³´ í‚¤ì—¬ì•¼ í•œë‹¤





#### ì œ 1 ì •ê·œí˜•

1. ê° ì†ì„±ì´ ì›ìê°’, ì¦‰ í•˜ë‚˜ì˜ ê°’ë§Œ ê°€ì ¸ì•¼ í•¨

2. ì¤‘ë³µëœ ì»¬ëŸ¼ì´ ì—†ì–´ì•¼ í•¨

3. ê° í–‰ì´ ìœ ì¼í•˜ê²Œ ì‹ë³„ë  ìˆ˜ ìˆì–´ì•¼ í•¨(ê¸°ë³¸í‚¤ ì¡´ì¬)

#### ì œ 2 ì •ê·œí˜•

1. ì œ 1 ì •ê·œí˜•ì„ ë§Œì¡±í•´ì•¼ í•¨

2. ë³µí•© í‚¤ (ë‘ ê°œ ì´ìƒì˜ ì»¬ëŸ¼ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ê¸°ë´„ í‚¤)ë¥¼ ì‚¬ìš©í•˜ëŠ” í…Œì´ë¸”ì—ì„œ ëª¨ë“  ë¹„ ê¸°ë³¸ í‚¤ ì†ì„±ì´ ê¸°ë³¸ í‚¤ì˜ ëª¨ë“  ì»¬ëŸ¼ì— ì™„ì „ ì¢…ì† ë˜ì–´ì•¼ í•¨
   
   - ì¦‰, ë¶€ë¶„ í•¨ìˆ˜ ì¢…ì†(ê¸°ë³¸ í‚¤ ì¼ë¶€ ì»¬ëŸ¼ë§Œìœ¼ë¡œ í•´ë‹¹ ì†ì„±ì´ ê²°ì •ë˜ëŠ” ê²ƒ)ì„ ì œê±°

> í•¨ìˆ˜ ì¢…ì†ì„±ì´ë€?
> 
> > í…Œì´ë¸” ë‚´ì˜ ì†ì„±ë“¤ ê°„ì— ê´€ê³„ë¥¼ ì„¤ëª…í•˜ëŠ” ê·œì¹™
> > 
> > ë§Œì•½ ì†ì„± Aì˜ ê°’ì„ ì•Œë©´ ì†ì„± Bì˜ ê°’ì„ ìœ ì¼í•˜ê²Œ ê²°ì •í•  ìˆ˜ ìˆì„ ë•Œ, BëŠ” Aì— í•¨ìˆ˜ì ìœ¼ë¡œ ì¢…ì†ëœë‹¤ê³  í•œë‹¤. A->Bë¡œ í‘œê¸°í•¨

> ê²°ì •ì ë€?
> 
> > ê´€ê³„í˜• í…Œì´ë¸”ì—ì„œ í•¨ìˆ˜ì  ì¢…ì†ì„± X->Yê°€ ì„±ë¦½í•  ë•Œ ì¢Œë³€ Xë¥¼ ê²°ì •ìë¼ê³  ë¶€ë¦„
> > 
> > ì¦‰ Xì˜ ê°’ì´ ê°™ìœ¼ë©´ Yì˜ ê°’ë„ ë°˜ë“œì‹œ ê°™ë‹¤ëŠ” ê·œì¹™ì—ì„œ ë‹¤ë¥¸ ê°’ì„ ê²°ì •í•´ì£¼ëŠ” ì†ì„± ì§‘í•©

##### ë³µí•© í‚¤ ì˜ˆì‹œ

- í•™ìƒ-ê³¼ëª© ì˜ˆì‹œ

- í•™ìƒ í…Œì´ë¸” pkëŠ” `í•™ìƒë²ˆí˜¸`

- ê³¼ëª© í…Œì´ë¸” pkëŠ” `ê³¼ëª©ë²ˆí˜¸`

- í•œ í•™ìƒì´ ì—¬ëŸ¬ ê³¼ëª©ì„ ë“£ê³ , í•œ ê³¼ëª©ì€ ì—¬ëŸ¬ í•™ìƒì´ ìˆ˜ê°• -> N:M

- ì´ N:M ê´€ê³„ë¥¼ í•´ì†Œí•˜ê¸° ìœ„í•´ ìˆ˜ê°•ì‹ ì²­ì´ë¼ëŠ” ì¤‘ê°œ í…Œì´ë¸” í•„ìš”

- ìˆ˜ê°•ì‹ ì²­ í…Œì´ë¸”ì—ëŠ” (í•™ìƒë²ˆí˜¸, ê³¼ëª©ë²ˆí˜¸)ê°€ ë“¤ì–´ê°

- ì´ í…Œì´ë¸”ì—ì„œ í•™ìƒë²ˆí˜¸ë§Œ pkë¡œ ì“¸ìˆ˜ìˆë‚˜?
  
  - ì•ˆë¨, í•œ í•™ìƒì´ ì—¬ëŸ¬ ê³¼ëª©ì„ ì‹ ì²­í•˜ë©´ pk ì¤‘ë³µ

- ê³¼ëª© ë²ˆí˜¸ë§Œ pkë¡œ ì“¸ ìˆ˜ ìˆë‚˜?
  
  - ì•ˆë¨, í•œ ê³¼ëª©ì— ì—¬ëŸ¬ í•™ìƒì´ ì‹ ì²­í•˜ë©´ pk ì¤‘ë³µ

- ì´ í…Œì´ë¸”ì—ì„œ ê° í–‰ì„ ìœ ì¼í•˜ê²Œ ì‹ë³„í•˜ëŠ” ê°’ì€?
  
  - íŠ¹ì • í•™ìƒ(í•™ìƒë²ˆí˜¸)ì´ íŠ¹ì • ê³¼ëª©(ê³¼ëª©ë²ˆí˜¸)ì„ ì‹ ì²­í•œ ê·¸ í–‰ìœ„ ìì²´

- ë”°ë¼ì„œ ë‘ ê°’ì„ í•©ì¹œ(í•™ìƒë²ˆí˜¸, ê³¼ëª©ë²ˆí˜¸)ê°€ ì´ í…Œì´ë¸”ì˜ ë³µí•© ê¸°ë³¸ í‚¤ê°€ ë˜ì–´ì•¼ë§Œ ë°ì´í„°ì˜ ìœ ì¼ì„±ì´ ë³´ì¥ë¨

- 



#### ì œ 3 ì •ê·œí˜•

1. ì œ 2 ì •ê·œí˜•ì„ ë§Œì¡±í•´ì•¼ í•¨

2. ê¸°ë³¸ í‚¤ì— ëŒ€í•œ ì´í–‰ì  í•¨ìˆ˜ ì¢…ì†ì´ ì—†ì–´ì•¼ í•¨
   
   1. A -> B, B->Cì¸ ê²½ìš°, A -> Cë¥¼ ì´í–‰ì¢…ì†ì´ë¼ê³  ë¶€ë¦„
   
   2. ê¸°ë³¸í‚¤ê°€  ì•„ë‹Œ ì†ì„±ì´ ë‹¤ë¥¸ ì†ì„±ì— ì˜í•´ ê²°ì •ë˜ì§€ ì•Šì•„ì•¼ í•¨
- ì˜ˆ
  
  - í•™ìƒ í…Œì´ë¸”ì—ì„œ í•™ê³¼ ë²ˆí˜¸ -> í•™ê³¼ëª… -> ëŒ€í•™ ì´ë¦„ ì‹ìœ¼ë¡œ ì´ì–´ì§„ë‹¤ë©´, í•™ê³¼ë²ˆí˜¸ -> ëŒ€í•™ ì´ë¦„ ë¶€ë¶„ì„ ë³„ë„ í…Œì´ë¸”ë¡œ ë¶„ë¦¬



- ê¸°ë³¸ í‚¤ê°€ ì•„ë‹Œ ì†ì„± ê°„ì˜ ì¢…ì†ì„±ì„ ì œê±°í•´ì•¼ í•¨

- ë¹„ ê¸°ë³¸ í‚¤ ì»¬ëŸ¼ì´ ë‹¤ë¥¸ ë¹„ ê¸°ë³¸ í‚¤ ì»¬ëŸ¼ì„ ê²°ì •í•˜ë©´ ì•ˆë¨
  
  - í•™ìƒë²ˆí˜¸ -> í•™ìƒì´ë¦„/í•™ê³¼ (í•™ê³¼ì¥ì€ í•™ìƒ ë²ˆí˜¸ì— ì˜í•´ ê²°ì • X)
  
  - í•™ê³¼ -> í•™ê³¼ì¥(í•™ê³¼ì¥ì€ í•™ê³¼ì— ì˜í•´ì„œ ê²°ì •)
  
  - í•™ìƒë²ˆí˜¸ -> í•™ê³¼ -> í•™ê³¼ì¥ìœ¼ë¡œ ì´ì–´ì§€ëŠ” ì´í–‰ì  í•¨ìˆ˜ ì¢…ì† ë°œìƒ



#### BCNF (Boyce Codd Normal Form)

1. ì œ 3 ì •ê·œí˜•ì„ ë§Œì¡±í•´ì•¼ í•¨

2. ëª¨ë“  ê²°ì •ìê°€ í›„ë³´í‚¤ì—¬ì•¼í•¨

3. 3NF ì´í›„ì—ë„ ë‚¨ì•„ ìˆëŠ” ì´ìƒ í˜„ìƒì„ í•´ê²°í•˜ëŠ” ë” ì—„ê²©í•œ í˜•íƒœ

4. ê¸°ë³¸ í‚¤ê°€ ì•„ë‹Œ ì†ì„±ì´ ë‹¤ë¥¸ ì»¬ëŸ¼ì„ ê²°ì •í•  ìˆ˜ ì—†ê²Œë” í…Œì´ë¸”ì„ ë¶„í•´



##### í›„ë³´í‚¤

- ëª¨ë“  ì†ì„±ì„ ê²°ì •í•˜ëŠ” ìµœì†Œ ê²°ì •ì

- í•œ í…Œì´ë¸”ì˜ ê° í–‰ì„ ìœ ì¼í•˜ê²Œ ì‹ë³„í•  ìˆ˜ ìˆëŠ” ì†ì„± ì¤‘ ìµœì†Œì„±ì„ ë§Œì¡±í•˜ëŠ” í‚¤

- í›„ë³´ í‚¤ì˜ ì¡°ê±´
  
  - ìœ ì¼ì„±
    
    - í…Œì´ë¸”ì˜ ê° í–‰ì„ ê³ ìœ í•˜ê²Œ ì‹ë³„í•  ìˆ˜ ìˆì–´ì•¼ í•¨
  
  - ìµœì†Œì„±
    
    - ë¶ˆí•„ìš”í•œ ì»¬ëŸ¼ì„ í¬í•¨í•˜ì§€ ì•ŠëŠ” ìµœì†Œí•œì˜ ì†ì„± ì¡°í•©ì´ì–´ì•¼ í•¨
      
      - ë³µí•©í‚¤ê°€ í›„ë³´í‚¤ì¼ë•Œ ë‹¨ í•˜ë‚˜ì˜ ì»¬ëŸ¼ì´ë¼ë„ ë¹¼ë©´ ìœ ì¼ì„±ì´ ê¹¨ì ¸ì•¼ í•¨

- í•œ í…Œì´ë¸”ì— ì—¬ëŸ¬ í›„ë³´í‚¤ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë©° ê·¸ ì¤‘ í•˜ë‚˜ë¥¼ PKë¡œ ì„ íƒí•´ì•¼ í•¨





## ì‹¤ìŠµ

```python
# foods/models.py

class Recipe(models.Model):
    name = models.CharField(max_length=200)
    description = models.TextField(blank=True)
    # ì¬ë£Œë“¤ ì •ë³´ë¥¼ ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì €ì¥.
    ingredients = models.CharField(
        max_length=600,
        blank=True,
    )

    def __str__(self):
        return self.name 



class RecipeForm(forms.ModelForm):
    # ì‹ì¬ë£Œ ì •ë³´ ì…ë ¥ í•„ë“œ
    ingredients = forms.MultipleChoiceField(
        choices=[
            ('TMT', 'í† ë§ˆí† '),
            ('OLV', 'ì˜¬ë¦¬ë¸Œ'),
            ('PAS', 'íŒŒìŠ¤íƒ€'),
        ],
        widget=forms.CheckboxSelectMultiple,
        help_text='ìš”ë¦¬ ì¬ë£Œë¥¼ ì„ íƒí•˜ì„¸ìš”.',
    )

    class Meta:
        model = Recipe
        fields = '__all__'



```



### ì •ê·œí™”



```python
# foods/models.py

# ì‹ì¬ë£Œ ëª¨ë¸
class Ingredient(models.Model):
    name = models.CharField(max_length=100)

    def __str__(self):
        return self.name 

# foods/models.py

# ë ˆì‹œí”¼ ëª¨ë¸
class Recipe(models.Model):
    name = models.CharField(max_length=200)
    description = models.TextField()
    ingredients = models.ManyToManyField(
        Ingredient,
        related_name='recipes',
    )

    def __str__(self):
        return self.name



```



##### ğŸ³ RecipeForm ìˆ˜ì •

###### ingredients í•„ë“œë¥¼ ìœ„í•œ `ModelMultipleChoiceField` ë¡œ ë³€ê²½

```python
# foods/forms.py

from .models import Recipe, Ingredient

class RecipeForm(forms.ModelForm):
    ingredients = forms.ModelMultipleChoiceField(
        queryset=Ingredient.objects.all(),
        widget=forms.CheckboxSelectMultiple,
        required=False
    )

    class Meta:
        model = Recipe
        fields = ['name', 'description', 'ingredients'] 






```



#### ğŸ” queryset ì†ì„±

---

##### âœ” querysetì—ëŠ” â€œì–´ë–¤ ëª¨ë¸ì˜ ë ˆì½”ë“œë¥¼ ì„ íƒì§€ë¡œ ì“¸ ê²ƒì¸ì§€â€ë¥¼ ì§€ì •

- ì„ íƒì§€ì— ì‚¬ìš©í•  ê°’(ì‹¤ì œ í•„ë“œì— ì €ì¥ë  ê°’)ì„ í•´ë‹¹ **ëª¨ë¸ì—ì„œ ì§ì ‘ ê´€ë¦¬**
  
  - ê³ ìœ  ê°’ ì„¤ì • í˜¹ì€ `__str__` ë“±ìœ¼ë¡œ í‘œì‹œ
  
  - ì„ íƒì§€ ì •ë³´ê°€ ë°”ë€Œì–´ë„ **formì—ì„œ ì§ì ‘ ìˆ˜ì •í•  í•„ìš” ì—†ìŒ**

---

##### âœ” í•„ìš”ì— ë”°ë¼

ëŒ€ìƒ ëª¨ë¸ì´ ê°€ì§„ ë ˆì½”ë“œ ì¤‘ **ì¼ë¶€ë§Œ í•„í„°ë§í•˜ì—¬ ì‚¬ìš© ê°€ëŠ¥**

ì˜ˆ:

`queryset=Ingredient.objects.filter(category='vegetable')`







#### ğŸ” [ì°¸ê³ ] queryset ì†ì„±

##### í•„ìš”ì— ë”°ë¼ **ë³„ë„ì˜ ë©”ì„œë“œë¥¼ ì •ì˜í•˜ì—¬** querysetì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŒ

##### ì˜ˆì‹œì½”ë“œ

```python
from django.db.models import Q
from django import forms
from .models import Recipe, Ingredient


def get_filtered_ingredients():
    # 'ë§¤ìš´'ì„ í¬í•¨í•˜ì§€ ì•ŠëŠ” ì¬ë£Œ ì¤‘,
    # ì´ë¦„ì´ 'A'ë¡œ ì‹œì‘í•˜ê±°ë‚˜ 'B'ë¡œ ëë‚˜ëŠ” ì¬ë£Œë§Œ ì„ íƒ
    return Ingredient.objects.exclude(name__contains='ë§¤ìš´').filter(
        Q(name__startswith='A') | Q(name__endswith='B')
    )


class RecipeForm(forms.ModelForm):
    ingredients = forms.ModelMultipleChoiceField(
        queryset=get_filtered_ingredients(),
        widget=forms.CheckboxSelectMultiple,
        required=False
    )

    class Meta:
        model = Recipe
        fields = ['name', 'description', 'ingredients']

```



# ğŸ ë ˆì‹œí”¼ ì¡°íšŒ

### âœ” Django M:N ê´€ê³„ì˜ **ì—­ì°¸ì¡° ë§¤ë‹ˆì €**ë¥¼ í™œìš©í•˜ì—¬ ë Œë”ë§

```python
<ul>
    {% for ingredient in recipe.ingredients.all %}
        <li>{{ ingredient.name }}</li>
    {% endfor %}
</ul>

```



# âš ï¸ [ì£¼ì˜ì‚¬í•­] Model ì •ì˜ ì‹œ MTM ì£¼ì²´ (1/2)

---

- ë°ì´í„°ë¥¼ ì €ì¥í•  ë•Œ,  
  **ì‹ì¬ë£Œ ì •ë³´ì™€ì˜ ê´€ê³„ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ë³„ë„ì˜ ì „ì²˜ë¦¬ ê³¼ì •ì´ í•„ìš” ì—†ì—ˆë˜ ì´ìœ **ëŠ”  
  â†’ **Recipe ëª¨ë¸ì´ ì£¼ì²´**ì˜€ê¸° ë•Œë¬¸

---

- `Recipe` ëª¨ë¸ì´ `Ingredient` ëª¨ë¸ê³¼  
  **ManyToManyField**ë¥¼ í†µí•´ **ê´€ê³„ë¥¼ ì§ì ‘ ê°€ì§€ê³  ìˆìŒ**
  
  â†’ ì¦‰, MTM ê´€ê³„ì˜ "ì£¼ì²´"ëŠ” `Recipe`

---

- `ModelForm()`ì´ `Recipe.ingredients`ë¥¼ **ìë™ìœ¼ë¡œ ì¸ì‹**

- `form.save()` í˜¸ì¶œ ì‹œ  
  `ModelForm`ì´ ì´ MTM ê´€ê³„ë¥¼ **ìë™ ì²˜ë¦¬ ê°€ëŠ¥**





# âš ï¸ [ì£¼ì˜ì‚¬í•­] Model ì •ì˜ ì‹œ MTM ì£¼ì²´ (2/2)

---

- ë°˜ëŒ€ì˜ ê²½ìš°, **RecipeëŠ” ingredientsë¥¼ ì§ì ‘ í•„ë“œë¡œ ê°€ì§€ì§€ ì•ŠìŒ**

- ë”°ë¼ì„œ `ModelForm`ì—ì„œëŠ” ì´ í•„ë“œë¥¼ ê°ì§€í•˜ì§€ ëª»í•˜ê³ ,

- `form.save()` ì‹œ ê´€ë ¨ **ManyToMany ê´€ê³„ëŠ” ë¬´ì‹œë¨**

- ì•„ë˜ì™€ ê°™ì€ **ì¶”ê°€ì ì¸ ì „ì²˜ë¦¬ ê³¼ì •**ì´ í•„ìš”í•¨

```python
recipe_form = RecipeForm(request.POST)
if recipe_form.is_valid():
    recipe = recipe_form.save()
    ingredients = recipe_form.cleaned_data.get('ingredients')
    for ingredient in ingredients:
        ingredient.recipes.add(recipe)

```

### âœ” ìš”ì•½

- **MTM ì£¼ì²´ê°€ Recipeê°€ ì•„ë‹ ê²½ìš°**,  
  ModelFormì€ í•´ë‹¹ MTM í•„ë“œë¥¼ ìë™ ì²˜ë¦¬ ëª»í•¨

- ë”°ë¼ì„œ `form.save()` ì´í›„ì—  
  **ì§ì ‘ MTM ì—°ê²°ì„ ì²˜ë¦¬í•´ì•¼ í•¨(add, set, clear ë“±)**






















